<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KHAN AND TEAMS — EduCRM</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial; background:#0b1220;color:#e6e9f2; margin:0}
    .card{max-width:520px;margin:12vh auto;padding:28px;background:#121a2b;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    h1{font-size:20px;margin:0 0 18px}
    input{width:100%;padding:12px 14px;margin:8px 0;background:#0e1626;border:1px solid #1d2740;border-radius:10px;color:#e6e9f2}
    button{width:100%;padding:12px 14px;border:0;border-radius:10px;background:#5b8cff;color:#fff;font-weight:600;cursor:pointer}
    .row{display:flex;gap:10px}
    .muted{opacity:.8;font-size:12px;margin-top:10px}
    #app{display:none}
    a{color:#8fb3ff}
  </style>
</head>
<body>

  <!-- LOGIN -->
  <div class="card" id="login">
    <h1>Login — KHAN AND TEAMS EduCRM</h1>
    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <div class="row">
      <button id="loginBtn">Login</button>
    </div>
    <div class="muted">Tip: enable <b>Email/Password</b> in Firebase → Authentication.</div>
  </div>

  <!-- APP (shows after login) -->
  <div class="card" id="app">
    <h1>Welcome, <span id="who"></span></h1>
    <div class="row">
      <button id="logoutBtn">Logout</button>
    </div>
    <p class="muted">You’re signed in. Next we can add Students/Tasks UI.</p>
  </div>

  <script type="module">
    /* ===== 1) Your Firebase config (keep it here inside the script) ===== */
    const firebaseConfig = {
      apiKey: "AIzaSyDQLihrpXtO6apl4XRw6oSAt_zACrgIQk",
      authDomain: "kate-crm.firebaseapp.com",
      projectId: "kate-crm",
      storageBucket: "kate-crm.firebasestorage.app",
      messagingSenderId: "572476663739",
      appId: "1:572476663739:web:3ce5104c83db95c80069e",
      measurementId: "G-7BQ2DTQZ98"
    };

    /* ===== 2) Firebase SDK (CDN) ===== */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut }
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    /* ===== 3) Simple login/logout wiring ===== */
    const $ = (id)=>document.getElementById(id);
    const loginCard = $("login");
    const appCard = $("app");
    const who = $("who");

    $("loginBtn").onclick = async () => {
      const email = $("email").value.trim();
      const password = $("password").value;
      try {
        await signInWithEmailAndPassword(auth, email, password);
      } catch (e) {
        alert("Login error: " + e.message);
      }
    };

    $("logoutBtn").onclick = () => signOut(auth);

    onAuthStateChanged(auth, (user) => {
      if (user) {
        loginCard.style.display = "none";
        appCard.style.display = "block";
        who.textContent = user.email || "User";
      } else {
        appCard.style.display = "none";
        loginCard.style.display = "block";
      }
    });
  </script>
</body>
</html>
